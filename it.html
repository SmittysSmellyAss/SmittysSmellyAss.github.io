<!DOCTYPE html>
<html>
<head>
    <title>Random CS:GO Stream</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Redirecting to a Random CS:GO Stream...</h1>

    <script>
        const getStreams = async () => {
            try {
                const response = await axios.get('https://api.twitch.tv/helix/streams', {
                    headers: {
                        'Client-ID': 'your-client-id',
                        'Authorization': 'Bearer ' + 'your-oauth-token'
                    },
                    params: {
                        game_id: 'your-game-id-for-csgo',
                        first: 100  // Twitch limits us to 100 streams per request
                    }
                });

                const streams = response.data.data;
                const randomStream = streams[Math.floor(Math.random() * streams.length)];

                return randomStream;
            } catch (error) {
                console.error('Failed to get streams:', error);
            }
        }

        const redirectToStream = async () => {
            try {
                const stream = await getStreams();
                window.location.href = `https://twitch.tv/${stream.user_name}`;
            } catch (error) {
                console.error('Failed to redirect:', error);
            }
        }

        redirectToStream();
    </script>
</body>
</html>
